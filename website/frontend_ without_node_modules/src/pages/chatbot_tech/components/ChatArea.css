/* frontend/src/pages/chatbot_tech/components/ChatArea.css */

/* Styles for image messages and modal. 
   .chat-area, .message-wrapper, .message, .loading-indicator 
   are assumed to be styled in ChatInterface.css already.
*/

/* Style for the bubble containing an image from the bot */
.message-wrapper.bot .message.message-type-image {
    padding: 8px; /* Adjust padding around the image thumbnail */
    background-color: var(--bg-chat-bot); /* Or transparent if you want no distinct bubble */
    /* Consider removing box-shadow if the image itself is visually distinct enough */
    /* box-shadow: none; */ 
    max-width: fit-content; /* Bubble wraps around the image content */
  }
  
  .image-message-content {
    display: flex;
    flex-direction: column;
    align-items: center; /* Centers thumbnail and caption if present */
    cursor: pointer;
  }
  
  .chat-image-thumbnail {
    max-width: 200px; /* Adjust for desired thumbnail size */
    max-height: 150px; /* Adjust for desired thumbnail height */
    border-radius: 6px; /* Slightly less than message bubble for inset look */
    object-fit: cover; /* Ensures image covers the thumbnail area well */
    transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
    border: 1px solid var(--border-color-medium); /* Subtle border for thumbnail */
  }
  
  .chat-image-thumbnail:hover {
    transform: scale(1.03);
    box-shadow: var(--shadow-md);
  }
  
  .image-caption {
    font-size: var(--fs-xs);
    color: var(--text-dark); /* Caption text color */
    margin-top: 6px;
    text-align: center;
    max-width: 190px; /* Slightly less than thumbnail width */
    line-height: 1.3;
  }
  
  
  /* --- Image Modal Styles --- */
  .image-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.85); /* Darker overlay */
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 2000; 
    padding: 20px;
    box-sizing: border-box;
  }
  
  .image-modal-content {
    position: relative;
    background-color: var(--bg-main-lighter, #303550); /* Use a specific var or fallback */
    padding: 15px;
    border-radius: 10px;
    box-shadow: var(--shadow-xl);
    max-width: 90vw;
    max-height: 90vh;
    display: flex; 
    align-items: center;
    justify-content: center;
    box-sizing: border-box;
  }
  
  .image-modal-large {
    max-width: 100%;
    max-height: calc(90vh - 70px); /* Account for padding and potential close button space */
    object-fit: contain; /* Show entire image, don't crop */
    border-radius: 4px;
  }
  
  .image-modal-close-button {
    position: absolute;
    top: 8px;
    right: 12px;
    background: rgba(30,30,30,0.5);
    border: none;
    color: var(--text-light); 
    font-size: 2rem; 
    font-weight: bold;
    cursor: pointer;
    line-height: 1;
    padding: 0px 8px;
    border-radius: 50%;
    transition: background-color 0.2s;
  }
  
  .image-modal-close-button:hover {
    background: rgba(0,0,0,0.7);
    color: var(--primary-brand-accent); 
  }
  /* === ADD THESE STYLES FOR IMAGE GALLERY === */

/* Style for the bot message bubble when it's an image gallery */
.message-wrapper.bot .message.message-type-image_gallery {
    padding: 10px 12px; /* A bit more padding for the gallery title and grid */
    background-color: var(--bg-chat-bot); /* Consistent with other bot messages */
    max-width: 90%; /* Gallery can be wider */
    width: auto; /* Allow it to not take full 90% if content is smaller */
    display: flex; /* To allow title and grid to stack nicely */
    flex-direction: column;
  }
  
  .gallery-title {
    font-size: var(--fs-base); /* Or --fs-sm depending on desired size */
    font-weight: 500;
    color: var(--text-medium); /* Or --text-light if on dark bg */
    margin-bottom: 10px; /* Space between title and grid */
    padding-bottom: 6px;
    border-bottom: 1px solid var(--border-color-medium-light, #555e8a); /* Optional separator */
  }
  
  .image-gallery-grid {
    display: grid;
    /* Adjust minmax for desired thumbnail size. This aims for ~100-150px wide items */
    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); 
    gap: 8px; /* Gap between gallery items */
    width: 100%; /* Take full width of the message bubble */
  }
  
  .image-gallery-item {
    position: relative; /* For potential absolute positioning of error text if needed */
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center; /* Center content if image is smaller or fails */
    background-color: var(--bg-main-darker, #202438); /* Subtle bg for each item slot */
    border-radius: 6px;
    padding: 4px;
    aspect-ratio: 1 / 1; /* Makes items square, adjust if you prefer other ratios e.g. 4 / 3 */
    overflow: hidden; /* Clip image if it's larger than the item due to object-fit */
  }
  
  /* Re-use .chat-image-thumbnail for consistency, but ensure it fills the grid item */
  .image-gallery-item .chat-image-thumbnail {
    width: 100%;
    height: 100%;
    object-fit: cover; /* Cover ensures the image fills the square/rectangular item area */
    max-width: none; /* Override max-width from single thumbnail style if needed */
    max-height: none; /* Override max-height from single thumbnail style if needed */
    border-radius: 4px; /* Slightly smaller than item's border-radius */
    border: none; /* Remove border from individual thumbnail, item has padding */
  }
  
  /* Style for the fallback text within a gallery item when image fails */
  .image-gallery-item .image-load-error-text,
  .image-gallery-item .image-gallery-item-fallback-name {
    font-size: 0.75em;
    color: var(--text-dark);
    text-align: center;
    word-break: break-all; /* Prevent long filenames from breaking layout */
    padding: 0 4px;
  }
  
  /* Specific caption for single images (from your previous screenshot context) */
  .image-message-content .image-caption-single {
      font-size: var(--fs-xs);
      color: var(--text-medium); /* Adjust color as needed */
      margin-bottom: 5px; /* Space above the single image thumbnail */
      text-align: center;
  }
  
  /* Ensure loading indicator styles are defined from your ChatInterface.css or index.css */
  /*
  .loading-indicator { ... }
  .loading-indicator-dots { ... }
  .loading-indicator-dots span { ... }
  */
  
  /* Image Modal styles (should already be there from previous steps) */
  /*
  .image-modal-overlay { ... }
  .image-modal-content { ... }
  .image-modal-large { ... }
  .image-modal-close-button { ... }
  */