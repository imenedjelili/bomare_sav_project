/*
 * src/pages/auth/AuthSwitcherPage.css
 * Styles for the combined Login/Signup page with layout switching
 * and simulated logo morph/flow animation.
*/

/* --- Base Page Container (Ensure centering - Likely from App.css/AuthPages.css) --- */
/* This defines the background and centers the card */
.auth-page-container {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    padding: 20px;
    background-color: var(--primary-bg, #1a1a2e); /* Default fallback */
    color: var(--text-color, #ffffff);
    box-sizing: border-box;
    font-family: 'Poppins', sans-serif; /* Or your preferred font */
  }
  
  
  /* --- Switcher Card --- */
  /* The main container for the two panels and the animation */
  .auth-switcher-card.morph-layout {
    position: relative; /* Needed for absolute positioning of droplet */
    display: flex;
    background-color: var(--card-bg, #1f1f38);
    border-radius: var(--border-radius-card, 16px);
    box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
    width: 100%;
    max-width: 980px; /* Adjust overall width */
    min-height: 650px; /* Ensure enough height */
    overflow: hidden; /* CRUCIAL to clip the droplet animation */
    border: 1px solid rgba(255, 255, 255, 0.08); /* Subtle border */
  }
  /* Add class when animating to potentially disable hover effects etc. */
  .auth-switcher-card.is-animating {
    pointer-events: none; /* Prevent interaction during complex transition */
  }
  .auth-switcher-card.is-animating * {
    pointer-events: none; /* Ensure children are also non-interactive */
  }
  
  
  /* --- Panel Containers --- */
  /* These hold either the form or the logo */
  .panel-container {
    flex: 1; /* Each panel takes half the space */
    padding: 45px 50px; /* Internal padding */
    display: flex; /* Use flex for content alignment */
    flex-direction: column;
    justify-content: center; /* Center content vertically */
    align-items: center; /* Center content horizontally */
    position: relative; /* For absolute positioning of logo/form wrappers */
    z-index: 1; /* Position below the droplet */
    box-sizing: border-box;
    transition: background-color 0.3s ease;
  }
  
  /* Specific panel background colors */
  .left-panel {
    background-color: var(--card-bg, #1f1f38); /* Typically form background */
  }
  .right-panel {
    background-color: var(--card-bg-lighter, #2c2c4c); /* Typically logo background */
  }
  
  
  /* --- Logo Container Styling --- */
  /* Wrapper for the logo image, positioned absolutely within a panel */
  .logo-container {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%); /* Center precisely */
    width: 70%; /* Responsive width */
    max-width: 150px; /* Limit maximum size */
    opacity: 0; /* Hidden by default, controlled by .active */
    z-index: 5; /* Above form wrapper background */
    /* Control fade-in/out speed - separate from wake */
    transition: opacity 0.2s ease-in-out;
    pointer-events: none; /* Not interactive when hidden */
  }
  /* Class to make the logo visible */
  .logo-container.active {
    opacity: 1;
    pointer-events: auto; /* Only allow interaction when fully visible */
  }
  /* The actual logo image */
  .logo-container .bomare-logo-display {
    width: 100%;
    height: auto;
    object-fit: contain;
    display: block; /* Prevents extra space below */
  }
  
  /* "Wake Up" Animation on Logo Container */
  @keyframes logoWake {
    0%, 100% { transform: translate(-50%, -50%) scale(1); filter: brightness(1) drop-shadow(0 0 0px var(--accent-color, #3090C7)); }
    50% { transform: translate(-50%, -50%) scale(1.08); filter: brightness(1.3) drop-shadow(0 0 8px var(--accent-color, #3090C7)); } /* Scale up, brighten, add glow */
  }
  /* Apply the wake animation */
  .logo-container.waking {
    animation: logoWake 0.4s ease-in-out forwards;
    /* Keep opacity 1 during wake */
    opacity: 1 !important;
  }
  /* Ensure logo fades out smoothly AFTER waking when detaching starts */
  .auth-switcher-card.is-animating .logo-container.active:not(.waking) {
      /* If animating but not waking, assume it should fade out */
      opacity: 0;
      transition: opacity 0.2s ease-out; /* Quick fade */
  }
  
  
  /* --- Form Content Wrapper --- */
  /* Wrapper for the form components, allows fading */
  .form-content-wrapper {
    width: 100%; /* Take full width of the panel */
    height: 100%; /* Take full height for centering */
    display: flex; /* Enable flex for centering form content if needed */
    flex-direction: column;
    justify-content: center;
    opacity: 0; /* Hidden by default */
    z-index: 1; /* Below logo */
    pointer-events: none; /* Not interactive when hidden */
    /* Add transition for fade-in/out, add delay for fade-in */
    transition: opacity 0.4s ease-in-out 0.2s; /* Delay fade-in slightly */
  }
  /* Class to make the form visible */
  .form-content-wrapper.active {
    opacity: 1;
    pointer-events: auto; /* Allow interaction ONLY when fully active */
  }
  /* Ensure form content styles apply */
  .form-content-wrapper .auth-form-panel { padding: 0; background: none; box-shadow: none; border: none; height: auto; }
  .form-content-wrapper .auth-title { margin-top: 0; }
  
  
  /* --- Animated Droplet --- */
  .animated-droplet {
    position: absolute;
    z-index: 100; /* Must be on top */
    width: 10px; /* Start very small */
    height: 10px;
    border-radius: 50%;
    opacity: 0;
    transform-origin: center center;
    transform: translate(-50%, -50%) scale(0);
    top: 50%; left: 50%; /* Fallback */
    pointer-events: none;
    /* Base transitions - Adjust timings carefully! */
    transition: transform 0.7s cubic-bezier(0.45, 0.05, 0.55, 0.95), /* Scale and position */
                opacity 0.3s ease-in-out,
                width 0.5s cubic-bezier(0.45, 0.05, 0.55, 0.95),
                height 0.5s cubic-bezier(0.45, 0.05, 0.55, 0.95),
                border-radius 0.6s cubic-bezier(0.45, 0.05, 0.55, 0.95),
                top 0.7s cubic-bezier(0.45, 0.05, 0.55, 0.95), /* Animate top/left for flow */
                left 0.7s cubic-bezier(0.45, 0.05, 0.55, 0.95);
  }
  
  /* --- Droplet Animation State Styles --- */
  
  /* State: Detaching (Appears and grows from logo position) */
  .animated-droplet.detaching {
    width: 60px; height: 60px; opacity: 1;
    transform: translate(-50%, -50%) scale(1);
    /* Faster transition for appearing */
    transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), /* Overshoot scale slightly */
                opacity 0.2s ease-out,
                width 0.3s ease-out, height 0.3s ease-out,
                border-radius 0.3s ease-out,
                top 0s, left 0s; /* Position instantly */
  }
  .animated-droplet.detaching.to-signup { /* Start R */
    top: 50%; left: 75%; border-radius: 60% 40% 30% 70% / 60% 60% 40% 40%;
  }
  .animated-droplet.detaching.to-login { /* Start L */
    top: 50%; left: 25%; border-radius: 40% 60% 70% 30% / 60% 60% 40% 40%;
  }
  
  /* State: Flowing (Moves across, shape changes) */
  .animated-droplet.flowing {
    opacity: 1; width: 70px; height: 50px; /* Stretch slightly */
    border-radius: 35% 65% 45% 55% / 60% 40% 60% 40%; /* Fluid shape */
    transform: translate(-50%, -50%) scale(1.1);
    /* Uses default 0.7s transition for top/left defined in base .animated-droplet */
  }
  .animated-droplet.flowing.to-signup { left: 25%; /* Move L */ }
  .animated-droplet.flowing.to-login { left: 75%; /* Move R */ }
  
  /* State: Landing (Splash animation at destination) */
  @keyframes splash { /* More pronounced splash */
    0% { transform: translate(-50%, -50%) scale(1.1); opacity: 1; border-radius: 35% 65% 45% 55% / 60% 40% 60% 40%; } /* Arriving shape */
    40% { transform: translate(-50%, -50%) scale(0.8, 1.5); opacity: 0.9; border-radius: 50%; } /* Flatten vertically */
    70% { transform: translate(-50%, -50%) scale(1.6, 0.6); opacity: 0.5; border-radius: 60% 40% 70% 30% / 30% 70% 40% 60%; } /* Splash wider */
    100% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; border-radius: 50%;} /* Shrink and fade */
  }
  .animated-droplet.landing {
    opacity: 1; /* Ensure visible before keyframe starts */
    /* Apply splash animation */
    animation: splash 0.4s ease-out forwards; /* Adjust duration as needed */
    /* Important: Override base transition during animation */
     transition: none !important;
  }
  /* Keep position during splash animation */
  .animated-droplet.landing.to-signup { left: 25%; top: 50%;}
  .animated-droplet.landing.to-login { left: 75%; top: 50%; }
  
  /* State: Reforming (Droplet is hidden by splash animation, new logo appears) */
  .animated-droplet.reforming {
      opacity: 0 !important; /* Ensure it stays hidden */
      width: 0; /* Reset size */
      height: 0;
      transform: translate(-50%, -50%) scale(0);
      transition: none !important; /* Prevent transitions */
  }
  
  
  /* --- Base Auth Element Styles (Scoped to Form Wrapper) --- */
  /* Ensure necessary styles from AuthPages.css apply correctly */
  .form-content-wrapper .auth-logo-container { /* Logo inside form, if any */
    display: flex; justify-content: center; margin-bottom: 30px;
  }
  .form-content-wrapper .auth-logo { height: 40px; max-width: 200px; object-fit: contain; }
  .form-content-wrapper .auth-title { font-size: 2rem; font-weight: 600; color: var(--text-color); margin-bottom: 10px; text-align: center; }
  .form-content-wrapper .auth-subtitle { font-size: 0.9rem; color: var(--text-color-secondary); margin-bottom: 30px; text-align: center; line-height: 1.6; }
  .form-content-wrapper .auth-form { display: flex; flex-direction: column; gap: 20px; width: 100%; }
  .form-content-wrapper .auth-form-group { text-align: left; width: 100%; }
  .form-content-wrapper .auth-label { display: block; margin-bottom: 8px; font-size: 0.8rem; font-weight: 500; color: var(--text-color-secondary); text-transform: uppercase; letter-spacing: 0.5px; }
  .form-content-wrapper .auth-input-field,
  .form-content-wrapper .auth-select-field { /* Styles for inputs/select */ background-color: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.15); color: var(--text-color); width: 100%; padding: 12px 15px; border-radius: var(--border-radius, 8px); font-size: 0.95rem; line-height: 1.5; transition: border-color var(--anim-fast) ease, box-shadow var(--anim-fast) ease, background-color var(--anim-fast) ease; min-height: 48px; box-sizing: border-box; }
  .form-content-wrapper .auth-select-field { /* Select specific styles */ appearance: none; -webkit-appearance: none; -moz-appearance: none; background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23cccccc' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M2 5l6 6 6-6'/%3e%3c/svg%3e"); background-repeat: no-repeat; background-position: right 15px center; background-size: 12px 12px; padding-right: 40px !important; cursor: pointer; }
  .form-content-wrapper .auth-input-field::placeholder { color: rgba(255, 255, 255, 0.4); opacity: 1; }
  .form-content-wrapper .auth-input-field:focus,
  .form-content-wrapper .auth-select-field:focus { border-color: var(--accent-color); background-color: rgba(255, 255, 255, 0.08); outline: none; box-shadow: 0 0 0 3px hsla(var(--accent-color-hsl-values, 205, 100%, 66%), 0.3); }
  .form-content-wrapper .auth-input-wrapper { position: relative; display: flex; align-items: center; }
  .form-content-wrapper .auth-input-wrapper .auth-input-field { padding-right: 45px; }
  .form-content-wrapper .auth-password-toggle { position: absolute; right: 0px; top: 50%; transform: translateY(-50%); background: transparent; border: none; cursor: pointer; color: var(--text-color-secondary); padding: 10px 15px; display: flex; align-items: center; justify-content: center; transition: color var(--anim-fast) ease; }
  .form-content-wrapper .auth-password-toggle:hover { color: var(--accent-color); }
  .form-content-wrapper .auth-password-toggle svg { width: 20px; height: 20px; }
  .form-content-wrapper .auth-form-row { display: flex; gap: 15px; width: 100%; }
  .form-content-wrapper .auth-form-row > .auth-form-group { flex: 1; }
  .form-content-wrapper .auth-checkbox-container { display: flex; justify-content: space-between; align-items: center; margin-top: 5px; flex-wrap: wrap; gap: 10px; }
  .form-content-wrapper .auth-checkbox-label { display: flex; align-items: center; gap: 10px; font-size: 0.85rem; color: var(--text-color-secondary); cursor: pointer; user-select: none; }
  .form-content-wrapper .auth-checkbox-label input[type="checkbox"] { width: 16px; height: 16px; accent-color: var(--accent-color); cursor: pointer; }
  .form-content-wrapper .auth-checkbox-label a,
  .form-content-wrapper .auth-link { color: var(--accent-color); text-decoration: none; font-size: 0.85rem; transition: color var(--anim-fast) ease, text-decoration var(--anim-fast) ease; }
  .form-content-wrapper .auth-checkbox-label a:hover,
  .form-content-wrapper .auth-link:hover { color: var(--accent-color); text-decoration: underline; }
  .form-content-wrapper .auth-message { /* Message styles */ font-size: 0.88rem; margin-top: 10px; margin-bottom: 5px; padding: 10px 15px; border-radius: var(--border-radius); text-align: left; border: 1px solid transparent; display: flex; align-items: center; gap: 8px; }
  .form-content-wrapper .auth-message.error { /* Error message */ color: var(--error-color, #ff8080); background-color: rgba(var(--error-color-rgb, 255, 128, 128), 0.1); border-color: rgba(var(--error-color-rgb, 255, 128, 128), 0.3); }
  .form-content-wrapper .auth-message.success { /* Success message */ color: var(--success-color, #80ff80); background-color: rgba(var(--success-color-rgb, 128, 255, 128), 0.1); border-color: rgba(var(--success-color-rgb, 128, 255, 128), 0.3); }
  .form-content-wrapper .auth-submit-btn { /* Submit button */ margin-top: 15px; padding: 13px 20px !important; font-size: 1rem !important; font-weight: 500 !important; width: 100%; border-radius: var(--border-radius, 8px) !important; transition: background-color var(--anim-fast) ease, transform var(--anim-fast) ease !important; }
  .form-content-wrapper .auth-submit-btn:hover:not(:disabled) { transform: translateY(-2px); filter: brightness(1.1); }
  .form-content-wrapper .auth-submit-btn:disabled { opacity: 0.6; cursor: not-allowed; }
  .form-content-wrapper .auth-divider { /* Divider styles */ display: flex; align-items: center; text-align: center; color: var(--text-color-secondary); font-size: 0.8rem; margin: 30px 0; text-transform: uppercase; letter-spacing: 0.5px; }
  .form-content-wrapper .auth-divider::before,
  .form-content-wrapper .auth-divider::after { content: ''; flex: 1; border-bottom: 1px solid rgba(255, 255, 255, 0.1); }
  .form-content-wrapper .auth-divider span { padding: 0 15px; }
  .form-content-wrapper .auth-social-login-group { /* Social buttons */ display: flex; justify-content: center; gap: 20px; }
  .form-content-wrapper .auth-social-btn { background-color: transparent; border: 1px solid rgba(255, 255, 255, 0.2); color: var(--text-color-secondary); padding: 10px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all var(--anim-fast) ease; width: 46px; height: 46px; }
  .form-content-wrapper .auth-social-btn:hover { background-color: rgba(255, 255, 255, 0.08); border-color: var(--accent-color); color: var(--accent-color); transform: translateY(-2px); }
  .form-content-wrapper .auth-social-btn svg { width: 20px; height: 20px; }
  
  
  /* --- FIX for the Toggle Button Styling --- */
  .form-content-wrapper .auth-secondary-link-text {
    margin-top: 30px;
    font-size: 0.9rem;
    color: var(--text-color-secondary); /* Color for the non-link part */
    text-align: center;
  }
  /* Style the toggle <button> elements to look exactly like links */
  .form-content-wrapper .auth-link.as-button {
    /* Reset All Button Defaults */
    appearance: none; -webkit-appearance: none; -moz-appearance: none;
    background: none; border: none; padding: 0; margin: 0;
    display: inline; /* Allow it to flow with text */
  
    /* Inherit Text Styles from Parent */
    font: inherit; line-height: inherit; vertical-align: baseline;
  
    /* Apply Link Styles */
    color: var(--accent-color); cursor: pointer;
    text-decoration: none; font-weight: 500;
    margin-left: 5px; /* Add space between text and button */
  }
  /* Add Hover Effect */
  .form-content-wrapper .auth-link.as-button:hover {
    text-decoration: underline;
    filter: brightness(1.1);
  }
  
  
  /* --- Responsive Adjustments --- */
  @media (max-width: 800px) {
    .auth-switcher-card.morph-layout {
      flex-direction: column; max-width: 480px; min-height: auto;
    }
    .panel-container {
      flex: 1 1 auto; width: 100%; padding: 35px 30px;
    }
    .left-panel { /* Form panel */
      order: 1; min-height: 450px;
    }
    .right-panel { /* Logo panel */
      order: -1; height: 150px; background-color: var(--card-bg); border-bottom: 1px solid rgba(255, 255, 255, 0.08);
    }
  
    .logo-container {
      position: relative; transform: none; top: auto; left: auto;
      width: auto; max-width: 100px; margin: 0 auto;
    }
  
    /* Adjust droplet Y positions and animation property for stacked layout */
    .animated-droplet {
       /* Animate TOP instead of LEFT on mobile */
       transition: transform 0.7s cubic-bezier(0.45, 0.05, 0.55, 0.95),
                   opacity 0.3s ease-in-out,
                   width 0.5s cubic-bezier(0.45, 0.05, 0.55, 0.95),
                   height 0.5s cubic-bezier(0.45, 0.05, 0.55, 0.95),
                   border-radius 0.6s cubic-bezier(0.45, 0.05, 0.55, 0.95),
                   top 0.7s cubic-bezier(0.45, 0.05, 0.55, 0.95), /* Animate TOP */
                   left 0s; /* LEFT is fixed at 50% */
    }
  
    .animated-droplet.detaching.to-signup, /* Start Top Center */
    .animated-droplet.flowing.to-login,
    .animated-droplet.landing.to-login {
       top: 75px; /* Vertical center of top panel */
       left: 50%; /* Horizontal center */
    }
     .animated-droplet.detaching.to-login, /* Start Lower Center */
     .animated-droplet.flowing.to-signup,
     .animated-droplet.landing.to-signup {
       top: calc(150px + 30vh); /* Top panel height + % down viewport */
       left: 50%; /* Horizontal center */
     }
     /* Flowing state needs to target the TOP property */
     .animated-droplet.flowing.to-signup { top: calc(150px + 30vh); /* Move Down */ }
     .animated-droplet.flowing.to-login { top: 75px; /* Move Up */ }
  
     /* Landing state needs TOP fixed */
     .animated-droplet.landing.to-signup { top: calc(150px + 30vh); left: 50%; }
     .animated-droplet.landing.to-login { top: 75px; left: 50%; }
  
    .form-content-wrapper { padding-top: 20px; }
    .form-content-wrapper .auth-form-row { flex-direction: column; gap: 20px; }
  }
  
  @media (max-width: 500px) {
      .panel-container { padding: 30px 25px; }
      .left-panel { min-height: 400px; }
      .form-content-wrapper .auth-title { font-size: 1.7rem; }
      .form-content-wrapper .auth-social-login-group { gap: 15px; }
      .form-content-wrapper .auth-social-btn { width: 42px; height: 42px; }
  }